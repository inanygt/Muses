<!DOCTYPE html>
<html>
   <head>
      <meta charset="UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Document</title>
      <!-- Fontawesome -->
      <link
         rel="stylesheet"
         href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
         integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
         crossorigin="anonymous"
         referrerpolicy="no-referrer"
      />

      <!-- Bootstrap css -->
      <link
         rel="stylesheet"
         href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      />
      <link rel="stylesheet" href="style.css" />
   </head>
   <body>
      <!-- Nav -->
      <nav class="navbar navbar-expand-lg bg-body-tertiary">
         <div class="container-fluid">
            <a class="navbar-brand" href="index.html">Muses</a>
            <button
               class="navbar-toggler"
               type="button"
               data-bs-toggle="collapse"
               data-bs-target="#navbarNav"
               aria-controls="navbarNav"
               aria-expanded="false"
               aria-label="Toggle navigation"
            >
               <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
               <ul class="navbar-nav">
                  <li class="nav-item">
                     <a
                        class="nav-link active"
                        aria-current="page"
                        href="odetojoy.html"
                        >Songs</a
                     >
                  </li>
                  <li class="nav-item">
                     <a class="nav-link" href="odeMas.html">odeToMas</a>
                  </li>
                  <li class="nav-item">
                     <a class="nav-link" href="oneBar.html">oneBar</a>
                  </li>
                  <li class="nav-item">
                     <a class="nav-link" href="metronome.html">Metronome</a>
                  </li>
                  <!-- <li class="nav-item">
                     <a class="nav-link disabled">Disabled</a>
                  </li> -->
               </ul>
            </div>
         </div>
      </nav>
      <h1>Ode to Joy Player</h1>

      <button onclick="playOdeToJoy()">Play Ode to Joy</button>
      <button onclick="stopOdeToJoy()">Stop Ode to Joy</button>

      <script>
         // Create an AudioContext
         var audioContext = new (window.AudioContext ||
            window.webkitAudioContext)();

         // Create a function to play a single note
         function playNote(frequency, duration) {
            var oscillator = audioContext.createOscillator(); // Create an oscillator node
            oscillator.type = "sine"; // Set the waveform type (sine, square, triangle, sawtooth)
            oscillator.frequency.value = frequency; // Set the frequency of the oscillator

            // Create a gain node to control the volume
            var gainNode = audioContext.createGain();
            oscillator.connect(gainNode); // Connect the oscillator to the gain node
            gainNode.connect(audioContext.destination); // Connect the gain node to the audio output
            gainNode.gain.setValueAtTime(0, audioContext.currentTime); // Set the initial volume to 0

            oscillator.start(); // Start the oscillator
            gainNode.gain.linearRampToValueAtTime(
               1,
               audioContext.currentTime + 0.02
            ); // Ramp up the volume to 1 quickly
            gainNode.gain.linearRampToValueAtTime(
               0,
               audioContext.currentTime + duration - 0.02
            ); // Ramp down the volume to 0 near the end
            oscillator.stop(audioContext.currentTime + duration); // Stop the oscillator after the specified duration
         }

         // Play the "Ode to Joy" melody
         function playOdeToJoy() {
            var notes = [
               { frequency: 329.63, duration: 2 }, // E for 1/2 beat
               { frequency: 261.63, duration: 0.5 }, // Pause for 1/2 beat
               { frequency: 349.23, duration: 1 }, // F for 1 beat
            ];

            var tempo = 90; // Adjust the tempo as desired
            var noteDuration = (60 / tempo) * 2; // Duration of each 1/4 beat (seconds)

            notes.forEach(function (note, index) {
               setTimeout(function () {
                  playNote(note.frequency, note.duration * noteDuration);
               }, index * noteDuration * 1000);
            });
         }

         // Function to stop the playback
         function stopOdeToJoy() {
            audioContext.close(); // Close the AudioContext to stop all sounds
            audioContext = new (window.AudioContext ||
               window.webkitAudioContext)(); // Create a new AudioContext for future use
         }
      </script>
      <!-- Bootstrap -->
      <script
         src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js"
         integrity="sha384-zYPOMqeu1DAVkHiLqWBUTcbYfZ8osu1Nd6Z89ify25QV9guujx43ITvfi12/QExE"
         crossorigin="anonymous"
      ></script>
      <script
         src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.min.js"
         integrity="sha384-Y4oOpwW3duJdCWv5ly8SCFYWqFDsfob/3GkgExXKV4idmbt98QcxXYs9UoXAB7BZ"
         crossorigin="anonymous"
      ></script>
   </body>
</html>
